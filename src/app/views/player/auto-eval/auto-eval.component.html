
<ion-content  scrollY="false" [fullscreen]="true" style="--background: #2E3034;">

<div style="display: flex;width: 100%; margin-top: 20%;">
  <span  class="fontTitle">Auto-Evaluation</span>

</div>

<div *ngIf="viewAll && autoEvalObject.hasPendingAutoEval && arrayDisplayPreviousMark.length ==0" style="display: flex;width: 100%;height: 3.5% ;margin-top: 5%;">
<div style="margin: auto;background-color: #3F4042; width: 50%;height: 100%;border-radius: 12px;display: flex;flex-direction: row;align-items: center;">

<div *ngFor="let item of arrayTitle" [ngClass]="IsCurrentAutoEval ? 'currentAutoEvalFocused' : 'currentAutoEvalNotFocused'" >
<span [ngClass]="!IsCurrentAutoEval ? 'fontOpacity' : 'font'">{{item}}</span>
</div>

<!--
<div  [ngClass]="!IsCurrentAutoEval ? 'histoAutoEvalFocused' : 'histoAutoEvalNotFocused'"   >
  <span [ngClass]="IsCurrentAutoEval ? 'fontOpacity' : 'font'" >Passées</span>
</div>
 -->

</div>
</div>

<ion-slides *ngIf="viewAll && arrayDisplayPreviousMark.length ==0" (ionSlideNextStart)="handleIsCurrentAutoEval()"  (ionSlidePrevStart)="handleIsCurrentAutoEval()"  pager="true" style="--bullet-background: #cccccc;margin-top: 15%;height: 60%;width:80%;background-color: #3F4042;border-radius: 12px;border: 1px solid #6E7899;" [options]="slideOpts">
  <ion-slide *ngIf="!autoEvalObject.hasPendingAutoEval">
    <div style="width: 100%;height: 10%;display: flex;">
      <!-- <span  class="fontTitle">{{item.value.auto_eval.name}}</span> -->
      <span  class="fontTitle">Pas d'auto évaluation en cours</span>


    </div>


  </ion-slide>
  <ion-slide *ngFor="let item of autoEvalObject.current | keyvalue" >

    <div style="height: 100%;width: 100%;">
      <div style="width: 100%;height: 10%;display: flex;">
        <!-- <span  class="fontTitle">{{item.value.auto_eval.name}}</span> -->
        <span  class="fontTitle">{{autoEvalObject.current[item.key | toString].auto_eval.name}}</span>


      </div>

      <div style="width: 100%;height: 5%;display: flex;margin-top: 10%;">
        <span style="margin: 0;margin-left: 5%;" class="fontTitle">Compétences évalués :</span>
      </div>

      <div style="width: 100%;height: 10%;display: flex;flex-direction: row;margin-top: 2%;">
        <span *ngFor="let skill of autoEvalObject.current[item.key | toString].auto_eval.skills" style="margin: 0;margin-left: 5%;" class="fontTitle"><ion-badge style="background-color: #2E3034;border: 1px solid #6E7899;padding: 10px;" class="font">{{autoEvalObject.skills[skill].name_skill}}</ion-badge></span>
      </div>


      <div style="width: 100%;height: 5%;display: flex;margin-top: 10%;">
        <span style="margin: 0;margin-left: 5%;" class="fontTitle">Durée auto-eval : </span>
      </div>

      <div style="width: 100%;height: 10%;display: flex;">
        <span style="margin: 0;margin-left: 5%;" class="fontTitle">Du {{autoEvalObject.current[item.key | toString].auto_eval.date_begin}} au {{autoEvalObject.current[item.key | toString].auto_eval.date_end}}</span>
      </div>



      <div *ngIf="!isAddingMark" style="width: 100%;height: 10%;display: flex;margin-top: 10%;">
        <span  class="fontTitle">{{returnActionToDo(autoEvalObject.current[item.key | toString].array)}}</span>
      </div>
      <div *ngIf="alreadyMarked" style="width: 100%;height: 10%;display: flex;margin-top: 5%;">
      <button (click)="seePreviousMark(item.key)" style="background-color: #2E3034;border-radius: 32px;border: 1px solid #6E7899;width: 60%;padding: 10px;" class="fontTitle">Voir les notes précédentes</button>
      </div>

      <div *ngIf="!isAddingMark && ngIfMarkMyselfBtn(autoEvalObject.current[item.key | toString].array)" style="width: 100%;height: 10%;display: flex;margin-top: 5%;">
        <button (click)="markMyself(item.key)" style="background-color: #2E3034;border-radius: 32px;border: 1px solid #6E7899;width: 60%;padding: 10px;" class="fontTitle">Se noter</button>
      </div>


   <div *ngIf="isAddingMark" class="d-flex w-100 ion-justify-content-center">
    <ion-item style="--background: #3F4042;width: 80%;border: 1px solid #6E7899;border-radius: 12px;" lines="none">
      <ion-label class="fontTitle">Se noter</ion-label>
      <ion-select [(ngModel)]="markPlayer" >
        <ion-select-option *ngFor="let item of arr" value="{{item}}">{{item}}</ion-select-option>
      </ion-select>
    </ion-item>
   </div>


   <div *ngIf="isAddingMark && markPlayer != ''" style="width: 100%;height: 10%;display: flex;margin-top: 5%;">
    <button (click)="validMark()" style="background-color: #2E3034;border-radius: 32px;border: 1px solid #6E7899;width: 60%;padding: 10px;" class="fontTitle">Valider ma note</button>
  </div>


    </div>

  </ion-slide>


</ion-slides>



  </ion-content>



  <app-footer></app-footer>
