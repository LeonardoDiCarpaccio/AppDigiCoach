
<ion-content  scrollY="false" [fullscreen]="true" style="--background: #2E3034;">
  <div *ngIf="arrayDisplayPreviousMark.length!=0" class="rightSideSkillItem" style=" display: flex;
  flex-direction: row;
  align-items: center;margin-right: 5%;"  (click)="returnToList()">
    <img style="width: 25px;margin-top: 5px;margin-right: 55%;margin-left: 15%;margin-top: 10%"  src="../../../../assets/images/back.png" alt="">

   
  </div>
<div style="display: flex;width: 100%; margin-top: 7%;">
  <span  class="fontTitle">Auto-Evaluation</span>

</div>

<div *ngIf="viewAll && autoEvalObject.hasPendingAutoEval && arrayDisplayPreviousMark.length ==0" style="display: flex;width: 100%;height: 3.5% ;margin-top: 5%;">
<div style="margin: auto;background-color: #3F4042; width: 50%;height: 100%;border-radius: 12px;display: flex;flex-direction: row;align-items: center;">

<!-- <div *ngFor="let item of arrayTitle"  > -->
<span [ngClass]="IsCurrentAutoEval=='current' ? 'font':'fontOpacity' ">Current</span>
<span [ngClass]="IsCurrentAutoEval=='histo' ?'font':'fontOpacity' ">Historique</span>

<!-- </div> -->

</div>
</div>

<ion-slides *ngIf="viewAll && arrayDisplayPreviousMark.length ==0" (ionSlideNextStart)="handleIsCurrentAutoEval('histo')"  (ionSlidePrevStart)="handleIsCurrentAutoEval('current')"  pager="true" style="--bullet-background: #cccccc;margin-top: 5%;height: 76%;    width: 95%;background-color: #3F4042;border-radius: 12px;border: 1px solid #6E7899;" [options]="slideOpts">
  <ion-slide *ngIf="!autoEvalObject.hasPendingAutoEval">
    <div style="width: 100%;height: 10%;display: flex;">
      <!-- <span  class="fontTitle">{{item.value.auto_eval.name}}</span> -->
      <span  class="fontTitle">Pas d'auto évaluation en cours</span>


    </div>


  </ion-slide>
  
   
    <ion-slide *ngFor="let key of arrayTitle"  style="width: 100% !important;" >
      <div *ngIf="key=='current'" class="slideItem h-90" style="width: 95% !important;overflow-y: auto;">
        
          <div *ngFor="let item of autoEvalObject.current | keyvalue; let i = index" class="skillItem" >

          <div class="cardItem" style="min-height: 78px;">
            <div style="display : flex ;justify-content: space-between;">
              <div style="display : flex ;flex-direction: column;justify-content: space-evenly;margin-left: 5%;">
                <div style="width: 100%;height: 10%;display: flex;">
                  <span style="display: contents;"  class="fontTitle">{{autoEvalObject.current[item.key | toString].auto_eval.name}}</span>
                </div>
                <div *ngIf="!isAddingMark" style="width: 100%;height: 10%;display: flex;margin-top: 10%;">
                  <span  class="font">{{returnActionToDo(autoEvalObject.current[item.key | toString].array)}}</span>
                </div>
              </div>

              <div class="rightSideSkillItem" style=" display: flex;
              flex-direction: column-reverse;
              align-items: center;margin-right: 5%;"  (click)="commentDisplayTest(autoEvalObject.current[''+item.key+''].auto_eval.id_auto_eval)">
                <span *ngIf=" (autoEvalObject.current[''+item.key+''].auto_eval.id_auto_eval!=idSelected)"  style="margin: 0;margin-top: 10px;" class="font " >Voir plus</span>
                <span *ngIf="(autoEvalObject.current[''+item.key+''].auto_eval.id_auto_eval==idSelected)"  style="margin: 0;margin-top: 10px;" class="font " >Voir moins</span>

                <img style="width: 25px;margin-top: 5px;" src="../../../../assets/images/eye (2).png" alt="">
              </div>
            </div>
   
          
          <div *ngIf="displayComment==true && (autoEvalObject.current[''+item.key+''].auto_eval.id_auto_eval==idSelected)"   
          style="margin-top: 2%;height: auto;background-color: #2E3034;border-radius: 12px;width: auto; " >
          <div style="display : flex ;flex-direction: row;text-align: center;
            margin-top: 2%;">
              <div style="width: 55%;height: 5%;">
                <span style="margin: 0;margin-left: 5%;" class="font">Durée auto-eval : </span>
              </div>
              <div style="width: 100%;display: flex;flex-direction: column-reverse;
              align-items: flex-start;">
                <span style="margin: 0;" class="font">Du {{autoEvalObject.current[item.key | toString].auto_eval.date_begin}} au {{autoEvalObject.current[item.key | toString].auto_eval.date_end}}</span>
              </div>
          </div>
          <div style="display : flex ;flex-direction: column;text-align: center;
            margin-top: 2%;">
            <div style="width: 95%;height: 5%;text-align: justify;">
              <span style="margin: 0;margin-left: 5%;" class="font">Compétences évalués :</span>
            </div>
            <div *ngIf="autoEvalObject.current[item.key | toString].auto_eval.skills !=null && autoEvalObject.current[item.key | toString].auto_eval.text==null" style="width: 100%;height: 10%; margin-top: 2%;display: flex;">
              <span *ngFor="let skill of autoEvalObject.current[item.key | toString].auto_eval.skills" style="margin: 0;margin-left: 5%;" class="font"><ion-badge style="background-color: #2E3034;border: 1px solid #6E7899;padding: 10px;" class="font">{{autoEvalObject.skills[skill].name_skill}}</ion-badge></span>
            </div> 
            <div *ngIf="autoEvalObject.current[item.key | toString].auto_eval.text!=null && autoEvalObject.current[item.key | toString].auto_eval.skills == null" style="width: 100%;height: 10%; margin-top: 2%;display: flex;">
              <span style="margin: 0;margin-left: 5%;" class="font"><ion-badge style="background-color: #2E3034;border: 1px solid #6E7899;padding: 10px;" class="font">{{autoEvalObject.current[item.key | toString].auto_eval.text }}</ion-badge></span>
            </div>         
          </div>

          <div *ngIf="alreadyMarked" style="width: 100%;height: 10%;display: flex;margin-top: 5%;">
            <button (click)="seePreviousMark(item.key,'current')" style="background-color: #2E3034;border-radius: 32px;border: 1px solid #6E7899;width: 60%;padding: 10px;" class="font">Voir les notes précédentes</button>
          </div>
      
          <div *ngIf="!isAddingMark && ngIfMarkMyselfBtn(autoEvalObject.current[item.key | toString].array)" style="width: 100%;height: 10%;display: flex;margin-top: 3%;">
            <button (click)="markMyself(item.key)" style="background-color: #2E3034;border-radius: 32px;border: 1px solid #6E7899;width: 30%;padding: 10px;" class="fontTitle">Se noter</button>
          </div>
      
      
          <div *ngIf="isAddingMark" style="margin-top: 3%;justify-content: space-evenly" class="d-flex">
            <ion-item style="--background: #3F4042;width: 45%;border: 2px solid #6E7899;border-radius: 12px;" lines="none">
              <ion-label class="fontTitle">Se noter</ion-label>
              <ion-select [(ngModel)]="markPlayer" >
                <ion-select-option *ngFor="let item of arr" value="{{item}}">{{item}}</ion-select-option>
              </ion-select>
            </ion-item>
            <div  class="rightSideSkillItem" style=" display: flex;
            flex-direction: row;
            align-items: center;margin-right: 5%;"  (click)="commentDisplayTest(autoEvalObject.current[''+item.key+''].auto_eval.id_auto_eval)">
              <img *ngIf="isAddingMark && markPlayer != ''" style="width: 25px;margin-top: 5px;margin-right: 55%;" (click)="deleteMark()"  src="../../../../assets/images/remove.png" alt="">

              <img *ngIf="isAddingMark && markPlayer == ''" style="width: 25px;margin-top: 5px;margin-right: 55%;" (click)="deleteMark()"  src="../../../../assets/images/remove.png" alt="">
              <img *ngIf="isAddingMark && markPlayer != ''" style="width: 25px;margin-top: 5px;" (click)="validMark()" src="../../../../assets/images/accept.png" alt="">

            </div>
          </div>
    
          </div>
        
          </div>
    
                </div>

      </div>
<div *ngIf="key=='histo'" class="slideItem h-90" style="width: 95% !important;overflow-y: auto;">
        

  <!-- <div *ngFor="let item of autoEvalObject.current | keyvalue" class="skillItem" [ngClass]="displayComment == true ? 'mb-50' : ''"> -->
    <div *ngFor="let item of autoEvalObject.histo | keyvalue; let i = index" class="skillItem" >

    <div class="cardItem" style="min-height: 78px;">
      <div style="display : flex ;justify-content: space-between;">
        <div style="display : flex ;flex-direction: column;justify-content: space-evenly;margin-left: 5%;">

        <div style="width: 100%;height: 10%;display: flex;">
          <span style="display: contents;"  class="fontTitle">{{autoEvalObject.histo[item.key | toString].auto_eval.name}}</span>
        </div>
        <div *ngIf="!isAddingMark" style="width: 100%;height: 10%;display: flex;margin-top: 10%;">
          <span  class="font">Auto-Evalutation terminé</span>
        </div>
    

    </div>

        <div class="rightSideSkillItem" style=" display: flex;
        flex-direction: column-reverse;
        align-items: center;margin-right: 5%;"  (click)="displayAutoEvalHistoSelected(autoEvalObject.histo[''+item.key+''].auto_eval.id_auto_eval)">
          <span *ngIf="(autoEvalObject.histo[''+item.key+''].auto_eval.id_auto_eval!=idHistoSelected)"  style="margin: 0;margin-top: 10px;" class="font " >Voir plus</span>
          <span *ngIf="(autoEvalObject.histo[''+item.key+''].auto_eval.id_auto_eval==idHistoSelected)"  style="margin: 0;margin-top: 10px;" class="font " >Voir moins</span>

          <img style="width: 25px;margin-top: 5px;" src="../../../../assets/images/eye (2).png" alt="">
        </div>
  
  </div>

    
    <div *ngIf="displayHisto==true && (autoEvalObject.histo[''+item.key+''].auto_eval.id_auto_eval==idHistoSelected)"   
    style="margin-top: 2%;height: auto;background-color: #2E3034;border-radius: 12px;width: auto; " >
      <div style="display : flex ;flex-direction: row;text-align: center;
      margin-top: 2%;">
        <div style="width: 55%;height: 5%;">
          <span style="margin: 0;margin-left: 5%;" class="font">Auto-eval finit depuis le : </span>
        </div>
        <div style="width: 100%;display: flex;flex-direction: column-reverse;
        align-items: flex-start;">
          <span style="margin: 0;" class="font"> {{autoEvalObject.histo[item.key | toString].auto_eval.date_end}}</span>
        </div>
      </div>
      <div style="display : flex ;flex-direction: column;text-align: center;
      margin-top: 2%;">
      <div style="width: 95%;height: 5%;text-align: justify;">
        <span style="margin: 0;margin-left: 5%;" class="font">Compétences évalués :</span>
      </div>
      <div *ngIf="autoEvalObject.histo[item.key | toString].auto_eval.skills!=null && autoEvalObject.histo[item.key | toString].auto_eval.text == null" style="width: 100%;height: 10%; margin-top: 2%;display: flex;">
        <span *ngFor="let skill of autoEvalObject.histo[item.key | toString].auto_eval.skills" style="margin: 0;margin-left: 5%;" class="font"><ion-badge style="background-color: #2E3034;border: 1px solid #6E7899;padding: 10px;" class="font">{{autoEvalObject.skills[skill].name_skill}}</ion-badge></span>
      </div>     
      <div *ngIf="autoEvalObject.histo[item.key | toString].auto_eval.skills==null && autoEvalObject.histo[item.key | toString].auto_eval.text != null" style="width: 100%;height: 10%; margin-top: 2%;display: flex;">
        <span  style="margin: 0;margin-left: 5%;" class="font"><ion-badge style="background-color: #2E3034;border: 1px solid #6E7899;padding: 10px;" class="font">{{autoEvalObject.histo[item.key | toString].auto_eval.text}}</ion-badge></span>
      </div>         
    </div>

      <div *ngIf="autoEvalObject.histo[item.key | toString].array!=null" style="width: 100%;height: 10%;display: flex;margin-top: 5%;">
        <button (click)="seePreviousMark(item.key,'histo')" style="background-color: #2E3034;border-radius: 32px;border: 1px solid #6E7899;width: 60%;padding: 10px;" class="font">Voir les notes précédentes</button>
      </div>

      <!-- <div *ngIf="!isAddingMark && ngIfMarkMyselfBtn(autoEvalObject.histo[item.key | toString].array)" style="width: 100%;height: 10%;display: flex;margin-top: 3%;">
        <button (click)="markMyself(item.key)" style="background-color: #2E3034;border-radius: 32px;border: 1px solid #6E7899;width: 30%;padding: 10px;" class="fontTitle">Se noter</button>
      </div> -->


   <!-- <div *ngIf="isAddingMark" style="margin-top: 3%;justify-content: space-evenly" class="d-flex">
    <ion-item style="--background: #3F4042;width: 45%;border: 2px solid #6E7899;border-radius: 12px;" lines="none">
      <ion-label class="fontTitle">Se noter</ion-label>
      <ion-select [(ngModel)]="markPlayer" >
        <ion-select-option *ngFor="let item of arr" value="{{item}}">{{item}}</ion-select-option>
      </ion-select>
    </ion-item>
    <div  class="rightSideSkillItem" style=" display: flex;
    flex-direction: row;
    align-items: center;margin-right: 5%;"  (click)="commentDisplayTest(autoEvalObject.histo[''+item.key+''].auto_eval.id_auto_eval)">
      <img *ngIf="isAddingMark && markPlayer != ''" style="width: 25px;margin-top: 5px;margin-right: 55%;" (click)="deleteMark()"  src="../../../../assets/images/remove.png" alt="">

      <img *ngIf="isAddingMark && markPlayer == ''" style="width: 25px;margin-top: 5px;margin-right: 55%;" (click)="deleteMark()"  src="../../../../assets/images/remove.png" alt="">
      <img *ngIf="isAddingMark && markPlayer != ''" style="width: 25px;margin-top: 5px;" (click)="validMark()" src="../../../../assets/images/accept.png" alt="">

    </div>
   </div> -->

    
    </div>
  
    </div>
  
  
          </div>
        </div>


  </ion-slide>


</ion-slides>
<div *ngIf="arrayDisplayPreviousMark.length!=0" class="slideItem" style="height : 75%;width: 95% !important;overflow-y: auto;">
  
  <div *ngFor="let item of arrayDisplayPreviousMark ; let i = index" class="skillItem" >

  <div class="cardItem" style="min-height: 78px;">
    <div style="display : flex ;justify-content: space-between;">
      <div style="display : flex ;flex-direction: column;justify-content: space-evenly;margin-left: 5%;">
        <div style="width: 100%;height: 10%;display: flex;">
          <span style="display: contents;"  class="fontTitle">{{item.name}}</span>
        </div>
        <!-- <div *ngIf="!isAddingMark" style="width: 100%;height: 10%;display: flex;margin-top: 10%;">
          <span  class="font">{{returnActionToDo(item.array)}}</span>
        </div> -->
      </div>

      <!-- <div class="rightSideSkillItem" style=" display: flex;
      flex-direction: column-reverse;
      align-items: center;margin-right: 5%;"  (click)="commentDisplayTest(autoEvalObject.current[''+item.key+''].auto_eval.id_auto_eval)">
        <span *ngIf="!displayComment==true " style="margin: 0;margin-top: 10px;" class="font " >Voir plus</span>
        <span *ngIf="displayComment==true " style="margin: 0;margin-top: 10px;" class="font " >Voir moins</span>

        <img style="width: 25px;margin-top: 5px;" src="../../../../assets/images/eye (2).png" alt="">
      </div> -->
    </div>

  
  <!-- <div *ngIf="displayComment==true && (autoEvalObject.current[''+item.key+''].auto_eval.id_auto_eval==idSelected)"   
  style="margin-top: 2%;height: auto;background-color: #2E3034;border-radius: 12px;width: auto; " > -->
  <div    
  style="margin-top: 2%;height: auto;background-color: #2E3034;border-radius: 12px;width: auto; " >
  <div style="display : flex ;flex-direction: row;text-align: center;
    margin-top: 2%;">
      <div style="width: 55%;height: 5%;">
        <span style="margin: 0;margin-left: 5%;" class="font">Note du : </span>
      </div>
      <div style="width: 100%;display: flex;flex-direction: column-reverse;
      align-items: flex-start;">
        <span style="margin: 0;" class="fontTitle">{{item.date}}</span>
      </div>
    
      
  </div>
  <div style="display : flex ;flex-direction: row;text-align: center;
    margin-top: 2%;">
  <div style="width: 55%;height: 5%;">
    <span style="margin: 0;margin-left: 5%;" class="font">Votre note : </span>
  </div>
  <div *ngIf="item.mark_player!=null" style="width: 100%;display: flex;flex-direction: column-reverse;
  align-items: flex-start;">
    <span style="margin: 0;" class="fontTitle">{{item.mark_player}}</span>
  </div>
  <div *ngIf="item.mark_player==null" style="width: 100%;display: flex;flex-direction: column-reverse;
  align-items: flex-start;">
    <span style="margin: 0;" class="font">Pas de note disponible</span>
  </div>
</div>
<div style="display : flex ;flex-direction: row;text-align: center;
    margin-top: 2%;">
  <div style="width: 55%;height: 5%;">
    <span style="margin: 0;margin-left: 5%;" class="font">Note coach : </span>
  </div>
  <div *ngIf="item.mark_trainer!=null" style="width: 100%;display: flex;flex-direction: column-reverse;
  align-items: flex-start;">
    <span style="margin: 0;" class="fontTitle">{{item.mark_trainer}}</span>
  </div>
  <div *ngIf="item.mark_trainer==null" style="width: 100%;display: flex;flex-direction: column-reverse;
  align-items: flex-start;">
    <span style="margin: 0;" class="font">Pas de note disponible</span>
  </div>
</div>

  <!-- A REGARDER SI OUI OU NONMERITE AFFICHAGE  -->
  
  <!-- <div style="display : flex ;flex-direction: column;text-align: center;
    margin-top: 2%;">
    <div style="width: 95%;height: 5%;text-align: justify;">
      <span style="margin: 0;margin-left: 5%;" class="font">Compétences évalués :</span>
    </div>
    <div style="width: 100%;height: 10%; margin-top: 2%;display: flex;">
      <span *ngFor="let skill of item.skills" style="margin: 0;margin-left: 5%;" class="font"><ion-badge style="background-color: #2E3034;border: 1px solid #6E7899;padding: 10px;" class="font">{{item.name_skill}}</ion-badge></span>
    </div>         
  </div> -->

  <!-- <div *ngIf="isAddingMark" style="margin-top: 3%;justify-content: space-evenly" class="d-flex">
    <ion-item style="--background: #3F4042;width: 45%;border: 2px solid #6E7899;border-radius: 12px;" lines="none">
      <ion-label class="fontTitle">Se noter</ion-label>
      <ion-select [(ngModel)]="markPlayer" >
        <ion-select-option *ngFor="let item of arr" value="{{item}}">{{item}}</ion-select-option>
      </ion-select>
    </ion-item>
    <div  class="rightSideSkillItem" style=" display: flex;
    flex-direction: row;
    align-items: center;margin-right: 5%;"  (click)="commentDisplayTest(autoEvalObject.current[''+item.key+''].auto_eval.id_auto_eval)">
      <img *ngIf="isAddingMark && markPlayer != ''" style="width: 25px;margin-top: 5px;margin-right: 55%;" (click)="deleteMark()"  src="../../../../assets/images/remove.png" alt="">

      <img *ngIf="isAddingMark && markPlayer == ''" style="width: 25px;margin-top: 5px;margin-right: 55%;" (click)="deleteMark()"  src="../../../../assets/images/remove.png" alt="">
      <img *ngIf="isAddingMark && markPlayer != ''" style="width: 25px;margin-top: 5px;" (click)="validMark()" src="../../../../assets/images/accept.png" alt="">

    </div>
  </div> -->

  </div>

  </div>

        </div>

</div>


  </ion-content>



  <app-footer></app-footer>
